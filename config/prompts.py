"""
AI Prompts Configuration
Centralized storage for OpenAI API prompts
"""

# Main analysis prompt with web search (in Russian for better understanding by the AI)
AI_ANALYSIS_PROMPT = """Проанализируй информацию о сериале/аниме и используй веб-поиск для точного определения данных:

{file_summary}

ОБЯЗАТЕЛЬНО используй веб-поиск для:
1. Поиска официального английского названия в базах данных: TVDB, TMDB, IMDb, MyAnimeList
2. Проверки года выхода сериала (первый эпизод)
3. Подтверждения номера сезона

Поисковые запросы должны включать:
- Оригинальное название из директории
- Релиз-группу (может указывать на тип контента)
- Альтернативные написания названия

Ответь ТОЛЬКО валидным JSON без дополнительного текста и markdown блоков:
{{
  "title": "официальное английское название (для Plex/TVDB/TMDB)",
  "year": год_выхода_первого_эпизода,
  "season": номер_сезона,
  "total_episodes": количество_эпизодов,
  "needs_confirmation": true/false
}}

КРИТИЧЕСКИ ВАЖНЫЕ требования к title:
- title: ТОЛЬКО название без точек, запятых и других знаков препинания в конце
- Официальное название для Plex (TVDB/TMDB совместимое)
- Для аниме: используй ромадзи латиницей (например "Shingeki no Kyojin")
- БЕЗ точек в конце названия (критично для именования папок)
- БЕЗ дополнительных символов, скобок, тире в конце
- year: Год выхода ПЕРВОГО эпизода (не год релиза озвучки)
- needs_confirmation: false только если уверен на 100% (нашёл подтверждение в веб-поиске)

Примеры правильных названий:
- "Attack on Titan" ✅ (не "Shingeki no Kyojin", не "Attack on Titan.")
- "Frieren Beyond Journeys End" ✅ (не "Frieren.Beyond.Journeys.End", не "Frieren Beyond Journeys End.")
- "The Mandalorian" ✅ (не "Mandalorian.The", не "The Mandalorian.")
- "Bakuman" ✅ (не "Bakuman.", не "Bakuman .", не "Bakuman,")

ЗАПРЕЩЕНО:
- ❌ "Bakuman." (точка в конце)
- ❌ "Bakuman ." (точка с пробелом)
- ❌ "Bakuman," (запятая в конце)
- ❌ "Bakuman -" (дефис в конце)"""

# Prompt for subtitle track detection
AI_SUBTITLE_DETECTION_PROMPT = """Определи тип субтитров по информации о файле:

Имя файла: {filename}
Родительская директория: {parent_dir}

Возможные типы субтитров:
- "Анимевод" (Animevod)
- "Crunchyroll" (CR)
- Другие студии озвучки (укажи название)
- null (если не удаётся определить)

Ответь ТОЛЬКО валидным JSON:
{{
  "subtitle_track": "название трека" или null
}}

Примечания:
- "Анимевод" может быть написан кириллицей или латиницей
- "CR" или "Crunchyroll" обозначает Crunchyroll
- Название трека должно быть на русском для русских студий"""

# Prompt for directory name parsing
AI_DIRECTORY_PARSING_PROMPT = """Извлеки информацию из названия директории с медиа-файлами:

Название директории: {dirname}

Типичные форматы:
- "Title.S01.1080p-GROUP"
- "Series.Name.S02.BluRay-RELEASE"
- "Anime.Title.Season.2.720p-Fansub"

Извлеки:
1. Название сериала (убери точки, замени на пробелы)
2. Номер сезона
3. Релиз-группу (после дефиса)
4. Год, если есть в названии

Ответь ТОЛЬКО валидным JSON:
{{
  "title": "название через пробелы",
  "season": номер_сезона или null,
  "year": год или null,
  "release_group": "название группы" или null
}}

Примечания:
- Убирай технические детали (качество, кодек, etc)
- Сохраняй оригинальное написание названия
- Номер сезона может быть в разных форматах: S01, Season 1, etc"""

# Prompt for subtitle language detection by content
AI_SUBTITLE_LANGUAGE_PROMPT = """Определи язык субтитров по их содержимому (батч-обработка):

{subtitles_samples}

Ответь ТОЛЬКО валидным JSON (массив объектов):
[
  {{"index": 0, "language": "код языка", "language_name": "название языка"}},
  {{"index": 1, "language": "код языка", "language_name": "название языка"}},
  ...
]

Коды языков:
- "rus" - Русский
- "eng" - Английский
- "jpn" - Японский
- "kor" - Корейский
- и т.д. (используй ISO 639-2/B коды)

Примечания:
- Анализируй текст субтитров, а не метаданные
- Если текст содержит диалоги - определи язык диалогов
- Если это надписи/знаки (signs/songs) - укажи это в language_name"""

# Prompt for episode number extraction (batch processing)
AI_EPISODE_EXTRACTION_PROMPT = """Извлеки номера эпизодов и сезонов из имён файлов (батч-обработка):

{filenames}

Поддерживаемые форматы:
- S01E01, s01e01 (стандартный)
- S4 - 01, S04 - 01 (с дефисом)
- " - 01 " (только номер эпизода)
- "01. Episode Name" (номер в начале)
- "Episode 01", "Ep 01", "E01"
- И любые другие вариации

Ответь ТОЛЬКО валидным JSON (массив объектов):
[
  {{"index": 0, "season": номер_сезона или null, "episode": номер_эпизода или null}},
  {{"index": 1, "season": номер_сезона или null, "episode": номер_эпизода или null}},
  ...
]

Примечания:
- Если сезон не указан явно - возвращай null для season
- Если эпизод не найден - возвращай null для episode
- Номера должны быть числами (integer), не строками
- Индекс должен совпадать с порядковым номером в списке файлов"""

# Prompt for audio track studio detection (batch processing)
AI_AUDIO_STUDIO_DETECTION_PROMPT = """Определи студию озвучки для аудиофайлов по информации (батч-обработка):

{audio_files_info}

Возможные студии озвучки (примеры):
- "AniLibria" (Анилибрия)
- "AniDUB" (АниДаб)
- "Studio Band" (Студийная банда)
- "JAM" (Студия JAM)
- "Original" (Оригинальная озвучка/японская)
- Другие студии (укажи название на русском)
- null (если не удаётся определить)

Ответь ТОЛЬКО валидным JSON (массив объектов):
[
  {{"index": 0, "audio_track": "название студии" или null}},
  {{"index": 1, "audio_track": "название студии" или null}},
  ...
]

Примечания:
- Анализируй имя файла И родительскую директорию
- Название студии должно быть на русском
- Если в названии директории/файла есть упоминание студии - используй его
- "Original", "JAP", "JPN" означает оригинальную японскую озвучку
- Индекс должен совпадать с порядковым номером в списке"""
